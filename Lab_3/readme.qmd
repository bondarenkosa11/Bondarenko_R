---
title: "Основы обработки данных с помощью R и Dplyr №2
        Бондаренко С.А."
format: 
  md:
    output-file: README.md
---

## Цель работы:

-   Развить практические навыки использования языка программирования R для обработки данных

-   Закрепить знания базовых типов данных языка R

-   Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()

## Исходные данные

1.  OC Windows

2.  Ноутбук

3.  Пакет nycflights13

4.  RStudio

## Общий план выполнения работы

1.  Установить библиотеку nycflights13.

2.  Проанализировать встроенные в пакет nycflights13 наборы данных с помощью языка R и ответить на вопросы:

    -   Сколько встроенных в пакет nycflights13 датафреймов?

    -   Сколько строк в каждом датафрейме?

    -   Сколько столбцов в каждом датафрейме?

    -   Как просмотреть примерный вид датафрейма?

    -   Сколько компаний-перевозчиков (carrier) учитывают эти наборы данных (представлено в наборах данных)?

    -   Сколько рейсов принял аэропорт John F Kennedy Intl в мае?

    -   Какой самый северный аэропорт?

    -   Какой аэропорт самый высокогорный (находится выше всех над уровнем моря)?

    -   Какие бортовые номера у самых старых самолетов?

    -   Какая средняя температура воздуха была в сентябре в аэропорту John F Kennedy Intl (в градусах Цельсия).

    -   Самолеты какой авиакомпании совершили больше всего вылетов в июне?

    -   Самолеты какой авиакомпании задерживались чаще других в 2013 году?

3.  Оформить отчет в соответствии с шаблоном

## Содержание ЛР

### Шаг 1: Получение данных

Установим пакет nycflights13 и подключим пакеты:

```{r}
library(dplyr)
```

```{r}
library(nycflights13)
```

### Шаг 2: Ответы на вопросы

-   Сколько встроенных в пакет nycflights13 датафреймов?

```{r}
ls("package:nycflights13") %>% length()
```

-   Сколько строк в каждом датафрейме?

```{r}
list(
  flights = nrow(flights),
  airlines = nrow(airlines),
  airports = nrow(airports),
  planes = nrow(planes),
  weather = nrow(weather))
```

-   Сколько столбцов в каждом датафрейме?

```{r}
list(
  flights = ncol(flights),
  airlines = ncol(airlines),
  airports = ncol(airports),
  planes = ncol(planes),
  weather = ncol(weather))
```

-   Как просмотреть примерный вид датафрейма?

```{r}
planes %>% glimpse()
```

-   Сколько компаний-перевозчиков (carrier) учитывают эти наборы данных (представлено в наборах данных)?

```{r}
airlines %>%
  select(carrier) %>%
  unique() %>%
  filter(!is.na(carrier)) %>%
  nrow()
```

-    Сколько рейсов принял аэропорт John F Kennedy Intl в мае?

```{r}
flights %>% filter(origin == "JFK", month == 5) %>% nrow()
```

-   Какой самый северный аэропорт?

```{r}
airports %>% arrange(desc(lat)) %>% slice(1)
```

-   Какой аэропорт самый высокогорный (находится выше всех над уровнем моря)?

```{r}
airports %>% arrange(desc(alt)) %>% slice(1)
```

-   Какие бортовые номера у самых старых самолетов?

```{r}
airports %>% arrange(desc(lat)) %>% slice(1)
```

-   Какая средняя температура воздуха была в сентябре в аэропорту John F Kennedy Intl (в градусах Цельсия).

```{r}
weather %>% filter(origin == "JFK", month == 9) %>% summarise(avg_temp = mean((temp - 32) * 5 / 9, na.rm = TRUE))
```

-   Самолеты какой авиакомпании совершили больше всего вылетов в июне?

```{r}
b<- flights %>% filter(month == 6) %>% group_by(carrier) %>% summarise("coun"=n()) %>% arrange(desc(coun)) %>% slice(1) %>% select(carrier)
airlines %>% filter(carrier == b$carrier) %>% select(name)
```

-   Самолеты какой авиакомпании задерживались чаще других в 2013 году?

```{r}
c<- flights %>% filter(arr_delay > 0 & year == 2013) %>% group_by(carrier) %>% summarise("coun"=n()) %>% arrange(desc(coun)) %>% slice(1) %>% select(carrier)
airlines %>% filter(carrier == c$carrier) %>% select(name)
```

## Оценка результата

В результате работы была скачан пакет nycflights13 и были выполнены задания с использованием наборов данных.

## Вывод

В результате выполненной работы был скачан пакет nycflights13 и были выполнены задания с использованием наборов данных.